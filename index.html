<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Puzzle Frasi</title>
<style>
  body {
    font-family: sans-serif;
    background: url('https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w5MTMyMXwwfDF8c2VhcmNofDF8fG1vb258ZW58MHx8fHwxNjk4MTk3NzM3&ixlib=rb-4.0.3&q=80&w=1080') no-repeat center center fixed;
    background-size: cover;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h2 { 
    text-align: center; 
    margin-bottom: 20px; 
    text-shadow: 2px 2px 6px #000;
  }
  #slots, #words {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 20px;
    max-width: 360px;
  }
  .slot, .word {
    background: rgba(0,0,0,0.6);
    margin: 5px;
    padding: 8px 12px;
    border-radius: 5px;
    text-align: center;
    cursor: pointer;
    user-select: none;
    min-width: 50px;
    transition: all 0.3s;
  }
  .slot { min-height: 30px; flex: 1; }
  .slot.correct { 
    background: #2e7d32; 
    color: #fff; 
    box-shadow: 0 0 15px #76ff03, 0 0 30px #76ff03 inset; 
  }
  .slot.wrong { 
    background: #c62828; 
    color: #fff; 
    animation: shake 0.3s; 
  }
  @keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-3px); }
    50% { transform: translateX(3px); }
    75% { transform: translateX(-3px); }
    100% { transform: translateX(0); }
  }
  #output {
    margin-top: 20px;
    white-space: pre-line;
    text-align: center;
    opacity: 0;
    transition: opacity 0.5s;
    text-shadow: 1px 1px 4px #000;
  }
</style>
</head>
<body>

<h2>Ricomponi le frasi cliccando le parole!</h2>
<div id="slots"></div>
<div id="words"></div>
<div id="output"></div>

<script>
const sentences = [
  "There's nothing like that the way you get me high",
  "You got a heart from heaven",
  "But you're burning like hell",
  "Hurry up, I took a chance on you, yeah",
  "Bless this, put my hands on you, yeah",
  "Letting me put my trust on you, yeah",
  "Spending my whole advance on you",
  "Yeah, when I'm down you know how to lift me up",
  "From the ground, through the clouds to the sun"
];

let currentIndex = 0;
const slotsDiv = document.getElementById('slots');
const wordsDiv = document.getElementById('words');
const outputDiv = document.getElementById('output');

function loadSentence(index) {
  slotsDiv.innerHTML = "";
  wordsDiv.innerHTML = "";

  const words = sentences[index].split(" ");
  const shuffled = [...words].sort(() => Math.random() - 0.5);

  // crea slot vuoti
  words.forEach(() => {
    const slot = document.createElement("div");
    slot.className = "slot";
    slotsDiv.appendChild(slot);
  });

  // crea parole cliccabili
  shuffled.forEach(word => {
    const div = document.createElement("div");
    div.className = "word";
    div.textContent = word;
    div.onclick = () => placeWord(div, words);
    wordsDiv.appendChild(div);
  });
}

function placeWord(wordDiv, correctWords) {
  const emptySlot = Array.from(slotsDiv.children).find(s => !s.textContent);
  if (!emptySlot) return;

  emptySlot.textContent = wordDiv.textContent;
  const index = Array.from(slotsDiv.children).indexOf(emptySlot);

  if (wordDiv.textContent === correctWords[index]) {
    emptySlot.classList.add("correct");
    wordDiv.style.visibility = "hidden";
    checkSentenceComplete(correctWords);
  } else {
    emptySlot.classList.add("wrong");
    setTimeout(() => {
      emptySlot.textContent = "";
      emptySlot.classList.remove("wrong");
      wordDiv.style.visibility = "visible";
    }, 800);
  }
}

function checkSentenceComplete(correctWords) {
  const slotWords = Array.from(slotsDiv.children).map(s => s.textContent);
  if (slotWords.join(" ") === correctWords.join(" ")) {
    setTimeout(() => {
      currentIndex++;
      if (currentIndex < sentences.length) {
        loadSentence(currentIndex);
      } else {
        outputDiv.textContent = sentences.join("\n");
        outputDiv.style.opacity = 1;
      }
    }, 500);
  }
}

// avvia la prima frase
loadSentence(currentIndex);
</script>

</body>
</html>
