
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Puzzle a frasi</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    background: #111;
    color: #fff;
    padding: 20px;
  }
  h2 { text-align: center; margin-bottom: 20px; }
  #puzzle, #slots {
    display: flex;
    flex-wrap: wrap;
    max-width: 360px;
    margin-bottom: 20px;
    justify-content: center;
  }
  .word, .slot {
    background: #444;
    margin: 5px;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    user-select: none;
    min-width: 40px;
    text-align: center;
    transition: background 0.3s;
  }
  .slot {
    background: #222;
    min-height: 30px;
    flex: 1;
  }
  .slot.correct { background: #2e7d32; } /* verde */
  .slot.wrong { background: #b71c1c; }   /* rosso */
  #output {
    margin-top: 20px;
    white-space: pre-line;
    text-align: center;
    opacity: 0;
    transition: opacity 0.5s;
  }
</style>
</head>
<body>

<h2>Ricomponi la frase!</h2>
<div id="slots"></div>
<div id="puzzle"></div>
<div id="output"></div>

<script>
const phrases = [
  "There's nothing like that the way you get me high",
  "You got a heart from heaven",
  "But you're burning like hell",
  "Hurry up, I took a chance on you, yeah",
  "Bless this, put my hands on you, yeah",
  "Letting me put my trust on you, yeah",
  "Spending my whole advance on you",
  "Yeah, when I'm down you know how to lift me up",
  "From the ground, through the clouds to the sun"
];

let currentIndex = 0;
const slotsDiv = document.getElementById('slots');
const puzzleDiv = document.getElementById('puzzle');
const outputDiv = document.getElementById('output');

function loadPhrase(index) {
  slotsDiv.innerHTML = "";
  puzzleDiv.innerHTML = "";

  const words = phrases[index].split(" ");
  const shuffled = [...words].sort(() => Math.random() - 0.5);

  // crea slot
  words.forEach(() => {
    const slot = document.createElement("div");
    slot.className = "slot";
    slotsDiv.appendChild(slot);
  });

  // crea parole cliccabili
  shuffled.forEach(word => {
    const div = document.createElement("div");
    div.className = "word";
    div.textContent = word;
    div.onclick = () => placeWord(div, words);
    puzzleDiv.appendChild(div);
  });
}

function placeWord(wordDiv, correctWords) {
  const emptySlot = Array.from(slotsDiv.children).find(s => !s.textContent);
  if (!emptySlot) return;

  emptySlot.textContent = wordDiv.textContent;

  // controllo correttezza
  const index = Array.from(slotsDiv.children).indexOf(emptySlot);
  if (emptySlot.textContent === correctWords[index]) {
    emptySlot.classList.add("correct");
  } else {
    emptySlot.classList.add("wrong");
  }

  wordDiv.style.visibility = "hidden";

  // se tutti riempiti
  if (Array.from(slotsDiv.children).every(s => s.textContent)) {
    checkCompletion(correctWords);
  }
}

function checkCompletion(correctWords) {
  const slotWords = Array.from(slotsDiv.children).map(s => s.textContent);
  if (slotWords.join(" ") === correctWords.join(" ")) {
    setTimeout(() => {
      currentIndex++;
      if (currentIndex < phrases.length) {
        loadPhrase(currentIndex);
      } else {
        outputDiv.textContent = phrases.join("\n");
        outputDiv.style.opacity = 1;
      }
    }, 1000);
  } else {
    // errore -> reset
    setTimeout(() => loadPhrase(currentIndex), 1000);
  }
}

// carica prima frase
loadPhrase(currentIndex);
</script>

</body>
</html>

